C51 COMPILER V9.60.7.0   INIT_DEVICE                                                       12/22/2023 09:21:57 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE INIT_DEVICE
NO OBJECT MODULE REQUESTED
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE C语言版本\init_device.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRIN
                    -T(.\Listings\init_device.lst) TABS(2) SRC(.\Objects\init_device.SRC)

line level    source

   1          // 包含C8051F020芯片的头文件
   2          #include "C8051F020.h"
   3          // 包含LCD12864液晶显示屏的头文件
   4          #include "LCD12864.h"
   5          // 包含显示的头文件
   6          #include "display.h"
   7          // 定义定时器初始化的函数，由Init_Device函数调用
   8          void Timer_Init()
   9          {
  10   1          // 设置时钟控制寄存器，使定时器0使用系统时钟
  11   1          CKCON     = 0x08;
  12   1          // 设置定时器控制寄存器，使定时器0工作在模式1
  13   1          TCON      = 0x10;
  14   1          // 设置定时器模式寄存器，使定时器0工作在16位计数模式
  15   1          TMOD      = 0x01;
  16   1          // 设置定时器0的低8位为0x30
  17   1          TL0       = 0x30;
  18   1          // 设置定时器0的高8位为0xF8
  19   1          TH0       = 0xF8;
  20   1      }
  21          
  22          
  23          // 定义端口输入输出初始化的函数，由Init_Device函数调用
  24          void Port_IO_Init()
  25          {
  26   1          // P0.0  -  未分配,  推挽输出,  数字信号
  27   1          // P0.1  -  未分配,  推挽输出,  数字信号
  28   1          // P0.2  -  未分配,  推挽输出,  数字信号
  29   1          // P0.3  -  未分配,  推挽输出,  数字信号
  30   1          // P0.4  -  未分配,  推挽输出,  数字信号
  31   1          // P0.5  -  未分配,  推挽输出,  数字信号
  32   1          // P0.6  -  未分配,  推挽输出,  数字信号
  33   1          // P0.7  -  未分配,  推挽输出,  数字信号
  34   1      
  35   1          // P1.0  -  未分配,  漏开输出,  数字信号
  36   1          // P1.1  -  未分配,  漏开输出,  数字信号
  37   1          // P1.2  -  未分配,  漏开输出,  数字信号
  38   1          // P1.3  -  未分配,  漏开输出,  数字信号
  39   1          // P1.4  -  未分配,  漏开输出,  数字信号
  40   1          // P1.5  -  未分配,  漏开输出,  数字信号
  41   1          // P1.6  -  未分配,  漏开输出,  数字信号
  42   1          // P1.7  -  未分配,  漏开输出,  数字信号
  43   1      
  44   1          // P2.0  -  未分配,  漏开输出,  数字信号
  45   1          // P2.1  -  未分配,  漏开输出,  数字信号
  46   1          // P2.2  -  未分配,  漏开输出,  数字信号
  47   1          // P2.3  -  未分配,  漏开输出,  数字信号
  48   1          // P2.4  -  未分配,  漏开输出,  数字信号
  49   1          // P2.5  -  未分配,  推挽输出,  数字信号
  50   1          // P2.6  -  未分配,  推挽输出,  数字信号
  51   1          // P2.7  -  未分配,  推挽输出,  数字信号
  52   1      
  53   1          // P3.0  -  未分配,  漏开输出,  数字信号
  54   1          // P3.1  -  未分配,  漏开输出,  数字信号
C51 COMPILER V9.60.7.0   INIT_DEVICE                                                       12/22/2023 09:21:57 PAGE 2   

  55   1          // P3.2  -  未分配,  漏开输出,  数字信号
  56   1          // P3.3  -  未分配,  漏开输出,  数字信号
  57   1          // P3.4  -  未分配,  漏开输出,  数字信号
  58   1          // P3.5  -  未分配,  漏开输出,  数字信号
  59   1          // P3.6  -  未分配,  漏开输出,  数字信号
  60   1          // P3.7  -  未分配,  漏开输出,  数字信号
  61   1      
  62   1          // 设置P0和P2的输出模式为推挽输出
  63   1          P0MDOUT   = 0xFF;
  64   1          P2MDOUT   = 0xE0;
  65   1          // 使能交叉开关
  66   1          XBR2      = 0x40;
  67   1      }
  68          
  69          
  70          // 定义中断初始化的函数，由Init_Device函数调用
  71          void Interrupts_Init()
  72          {
  73   1          // 设置中断控制寄存器，使能全局中断和定时器0中断
  74   1          IE        = 0x82;
  75   1          // 设置中断优先级寄存器，使定时器0中断为高优先级
  76   1          IP        = 0x02;
  77   1      }
  78          
  79          // 定义设备初始化的函数，由主函数调用
  80          void Init_Device(void)
  81          {
  82   1          // 调用定时器初始化的函数
  83   1          Timer_Init();
  84   1          // 调用端口输入输出初始化的函数
  85   1          Port_IO_Init();
  86   1          // 调用中断初始化的函数
  87   1          Interrupts_Init();
  88   1        // 调用液晶显示屏初始化的函数
  89   1        lcd_init();
  90   1        // 调用显示启动画面的函数
  91   1        display_startup_logo();
  92   1        // 延时1000毫秒
  93   1        delay_ms(1000);
  94   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     59    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
